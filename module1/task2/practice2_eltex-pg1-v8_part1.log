1. ssh-keygen
cat .ssh/id_rsa.pub

ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQCI8XLRxd89OusZtTqp9HA33bGh0jL2GWs7OHGHZa/J6txV+DOL2OgASR2k7DiLCMtgBCeJBQMGhHgNilXOiygjiVtwKZVUdyesr/5MjdSaFKsM1TYBOfVDdt1206GVW6Em+h6UL3e/EtqG0eun7wKJ3WJ8A06D5aMNXx+hetMS4Xn7c9Qr6uFZ5L3iOL3c8532DoBu64B5d7EACVGWNtkjQ3UyaL4w2v3atbVDgpW3bkthLvMLp4Qu25qeGcaJ52t3u7whShsXuFlzk1uoIlNocz9Wd8eRmAdNK4meImptqLF5pX/0Xktpa21seEtOUxspDCpD1W0O7AW5R5IN4AfdCIWowCymx3kHNsxfCdrc0RrzHiqLz3euJ4m+ee/J0/+f86RxUGncA2ddhtV4+qNvFBBiUGYUFoLjCXw63H6E2aLRtVNGwXdt0kbfp9z7GtU/psMLpH9beq48eu5JfmojQ4f2DFPjNhFdxDpEZI0sqmnXxNCihbGJanmMUH41scc= eltex-pg1-v8@eltex-2025-summer

2. ssh-copy-id root@172.16.9.182

на второй машине:

cat .ssh/authorized_keys
ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQCI8XLRxd89OusZtTqp9HA33bGh0jL2GWs7OHGHZa/J6txV+DOL2OgASR2k7DiLCMtgBCeJBQMGhHgNilXOiygjiVtwKZVUdyesr/5MjdSaFKsM1TYBOfVDdt1206GVW6Em+h6UL3e/EtqG0eun7wKJ3WJ8A06D5aMNXx+hetMS4Xn7c9Qr6uFZ5L3iOL3c8532DoBu64B5d7EACVGWNtkjQ3UyaL4w2v3atbVDgpW3bkthLvMLp4Qu25qeGcaJ52t3u7whShsXuFlzk1uoIlNocz9Wd8eRmAdNK4meImptqLF5pX/0Xktpa21seEtOUxspDCpD1W0O7AW5R5IN4AfdCIWowCymx3kHNsxfCdrc0RrzHiqLz3euJ4m+ee/J0/+f86RxUGncA2ddhtV4+qNvFBBiUGYUFoLjCXw63H6E2aLRtVNGwXdt0kbfp9z7GtU/psMLpH9beq48eu5JfmojQ4f2DFPjNhFdxDpEZI0sqmnXxNCihbGJanmMUH41scc= eltex-pg1-v8@eltex-2025-summer

Права доступа отличаются:

-rw------- 1 root root 584 Jul 11 03:21 .ssh/authorized_keys
-rw-r--r-- 1 eltex-pg1-v8 eltex-pg1-v8 584 июл 11 10:14 .ssh/id_rsa.pub

4. 
useradd -m -s /bin/bash user1
passwd user1

user1:x:1001:1001::/home/user1:/bin/bash

5.useradd user2
useradd user3

6. usermod -s /usr/sbin/nologin user3
su - user3
This account is currently not available.

su - user3 -s /bin/bash
whoami
user3
exit

7.groupadd mygroup
usermod -aG mygroup user1
groups user*

user1 : user1 mygroup
user2 : user2 users mygroup
user3 : user3 users mygroup

8. 
chgrp mygroup /opt/share/
chmod g+rwxs /opt/share/
drwxrwsr-x 2 root mygroup 4096 Jul 11 04:47 /opt/share/


9. su - user1
umask 027 в .profile
source .profile

10. su - user1 -c "touch /opt/share/file_user1"
su - user2 -c "touch /opt/share/file_user2"
su - user1 -c "rm -f /opt/share/file_user2"

Получается удалить благдаря SGID


11.
chmod +t /opt/share
ls -ld /opt/share
 
drwxrwsr-t 2 root mygroup 4096 Jul 11 05:46 /opt/share
su - user1 -c "touch /opt/share/file_user1_new"
su - user1 -c "touch /opt/share/file_user1_new"
su - user1 -c "rm -f /opt/share/file_user2"
rm: cannot remove '/opt/share/file_user2_new': Operation not permitted

12.
visudo
добавляем строку в sudoers 
user1 ALL=(root) NOPASSWD: /usr/bin/dmesg

для user2

vim /usr/local/bin/dmesg_user2

#!/bin/bash
/usr/bin/dmesg

chown root:root /usr/local/bin/dmesg_user2
chmod 4755 /usr/local/bin/dmesg_user2

этот вариант не работает 

13. chage -M 10 user1

14. nano /etc/motd

15. rsync -a /etc/ /root/etc_backup/

16. 
tar -czf /root/etc_backup.tar.gz /root/etc_backup
tar -cjf /root/etc_backup.tar.bz2 /root/etc_backup
tar -cf etc_backup.tar /root/etc_backup && 7z a etc_backup.7z etc_backup.tar

-rw-r--r--   1 root root 476K Jul 14 12:34 etc_backup.7z
-rw-r--r--   1 root root 553K Jul 14 12:45 etc_backup.tar.bz2
-rw-r--r--   1 root root 583K Jul 14 12:55 etc_backup.tar.gz

17. 
rsync -a /etc/ /root/etc_backup/
tar -czf etc_backup.tar.gz /root/etc_backup

18.
find /root/etc_backup >> find.txt
tar -tf /root/etc_backup.tar.bz2 >> tar.txt
diff tar.txt find.txt
wc -l find.txt
wc -l tar.txt
3488
3488
Нет разницы


19. mkdir /root/etc_backup_gzip
tar -xzf /root/etc_backup.tar.gz -C /root/etc_backup_gzip --strip-components=1
mkdir /root/etc_backup_7zip
7z x /root/etc_backup.7z -o/root/etc_backup_7zip
tar -xf etc_backup.tar -C . --strip-components=1
diff etc_backup_gzip/etc_backup/motd /root/etc_backup_7zip/etc_backup/motd

2,3d1
< 19.37 14.07.2025
< 
